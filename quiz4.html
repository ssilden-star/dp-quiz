<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DP Quiz 4 - Extended Topics</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: #c084fc;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .quiz-content {
            padding: 40px;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            color: #8b5cf6;
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .question {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option:hover {
            border-color: #8b5cf6;
            background: #f3e8ff;
        }

        .option.selected {
            border-color: #8b5cf6;
            background: #f3e8ff;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.2);
        }

        .option input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.3);
        }

        .option label {
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            width: 100%;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #8b5cf6;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #7c3aed;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

        .question-counter {
            font-size: 1rem;
            color: #7f8c8d;
        }

        .results {
            text-align: center;
            padding: 40px;
        }

        .results h2 {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .score {
            font-size: 3rem;
            color: #27ae60;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .score.fail {
            color: #e74c3c;
        }

        .answers-review {
            margin-top: 30px;
            text-align: left;
        }

        .answer-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .answer-item.correct {
            border-left: 5px solid #27ae60;
            background: #d5f4e6;
        }

        .answer-item.incorrect {
            border-left: 5px solid #e74c3c;
            background: #fadbd8;
        }

        .answer-question {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .answer-details {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .your-answer {
            margin-bottom: 5px;
        }

        .correct-answer {
            color: #27ae60;
            font-weight: 600;
        }

        .incorrect-answer {
            color: #e74c3c;
        }

        @media (max-width: 600px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .quiz-content {
                padding: 20px;
            }
            
            .question {
                font-size: 1.1rem;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>DP Quiz 4</h1>
            <p>Extended Topics</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="quiz-content">
            <div id="quizContainer">
                <div class="question-container">
                    <div class="question-number" id="questionNumber">Spørsmål 1 av 19</div>
                    <div class="question" id="questionText"></div>
                    <div class="options" id="optionsContainer"></div>
                </div>
                
                <div class="navigation">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()">Forrige</button>
                    <div class="question-counter">
                        <span id="currentQuestion">1</span> / <span id="totalQuestions">19</span>
                    </div>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">Neste</button>
                </div>
            </div>

            <div id="resultsContainer" style="display: none;">
                <div class="results">
                    <h2>Quiz 4 Fullført!</h2>
                    <div class="score" id="scoreDisplay"></div>
                    <p id="resultMessage"></p>
                    <div style="margin: 30px 0;">
                        <button class="btn btn-primary" onclick="startOver()">Ta quiz på nytt</button>
                        <a href="index.html" class="btn btn-secondary">Tilbake til hovedmeny</a>
                    </div>
                </div>
                
                <div class="answers-review" id="answersReview">
                    <h3 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Detaljerte Svar</h3>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "What is one disadvantage of a ship working using its DP system compared to being anchored?",
                options: ["DP vessels are less maneuverable than a vessel positioning using anchors", "A DP vessel takes longer to move between work locations", "Continually running thrusters are hazards for divers and ROVs", "A DP vessel can only work in very shallow water"],
                correct: 2
            },
            {
                question: "The following Position Reference System configurations are available for a DP Class 3 operation. Which is the best configuration?",
                options: ["2 DGNSS and Laser", "Taut Wire and two independent HPR systems", "DGNSS, Laser, Artemis and a single HPR system", "DGNSS, Taut Wire and a single HPR system with two transponders"],
                correct: 2
            },
            {
                question: "Under which of the following conditions may positioning be improved by increasing 'Control Gain'?",
                options: ["When station keeping is poor due to high noise in the position reference sensors", "When thrusters appear to be 'hunting'", "When encountering increased wind or current conditions", "During periods of poor visibility"],
                correct: 2
            },
            {
                question: "About what point does a DP vessel rotate when changing heading?",
                options: ["The vessel's Centre of Gravity", "A point mid-way between bow and stern", "The vessel's Centre of Rotation", "The location of the motion sensors on the vessel"],
                correct: 2
            },
            {
                question: "The main purpose of Dynamic Positioning is to:",
                options: ["Leave the positioning of the vessel to the computers in order that the operator on the bridge can be relieved of tedious work and focus on more important bridge", "Maintain position and heading automatically", "Maintain position, but not heading, automatically", "Maintain heading, but not position, automatically"],
                correct: 1
            },
            {
                question: "Which of the following is NOT considered to be a 'Local' Position Reference System?",
                options: ["Hydroacoustic Position Reference (HPR)", "Taut Wire", "Laser", "DGNSS"],
                correct: 3
            },
            {
                question: "What is the maximum practicable range for FMCW Radar Position Reference Systems such as RADius and RadaScan?",
                options: ["10-50m", "200-1000m", "5000m", "10000m"],
                correct: 1
            },
            {
                question: "In a Hydroacoustic Position Reference (HPR) System, a Responder Beacon is a device which:",
                options: ["Is interrogated by electrical signal through cable, replying through water", "Is interrogated through water and replies through water", "Sends continuous acoustic pulses from the sea floor", "Is interrogated through water and replies via cable"],
                correct: 0
            },
            {
                question: "If a platform has just one Artemis antenna, how many vessels can be positioned using Artemis as a Position?",
                options: ["Two vessels provided that they have different frequencies", "All vessels within a 5 km range", "Five vessels", "One vessel"],
                correct: 3
            },
            {
                question: "A vessel is using one HPR Pole/Transducer in Super Short Baseline (SSBL) mode. Four separate Transponder Beacons are in position and being interrogated. Three beacons are in fixed locations on the sea floor. The fourth beacon is designated 'mobile' and is located on an ROV. For DP Class purposes, this array qualifies as:",
                options: ["Two Position Reference Systems", "Three Position Reference Systems", "Four Position Reference Systems", "One Position Reference System"],
                correct: 3
            },
            {
                question: "What might be the 95 percent accuracy of a Differential Global Navigation Satellite System (DGNSS) using a modern commercial subscription service?",
                options: ["Less than 0.1 metre", "Less than 1 metre", "Less than 0.2 metres", "Any of the above, depending on which service is chosen"],
                correct: 1
            },
            {
                question: "Which of the following may adversely affect the quality and accuracy of positional data provided by satellite-based position reference systems?",
                options: ["The close proximity of large platform structures", "The DGPS antenna being located too high in the vessel", "Interference from laser-based position reference systems", "The use of the UTM co-ordinate system"],
                correct: 0
            },
            {
                question: "How does a Laser Position Reference System measure the bearing of a target?",
                options: ["By monitoring the height of the target", "By combining the relative bearing of the target with the ship's heading", "By measuring the time of flight to and from the target", "With reference to information from the Motion Reference Unit"],
                correct: 1
            },
            {
                question: "What is a vessel model?",
                options: ["A totally accurate description of a vessel's motions", "A computer algorithm that calculates thruster set point signals", "A mathematical description of how the vessel reacts to the forces acting upon it", "A software routine continually monitoring redundancy level"],
                correct: 2
            },
            {
                question: "Which Position Reference System provides the DP system with a global position (i.e. Latitude and Longitude or UTM co-ordinates)?",
                options: ["FMCW Radar", "Taut Wire", "Laser", "DGNSS"],
                correct: 3
            },
            {
                question: "What is the meaning of DARPS?",
                options: ["Desirable Artemis Related Position System", "Differential Artemis Relative Position System", "Differential Absolute and Relative Position System", "Degraded Absolute and Rigid Position System"],
                correct: 2
            },
            {
                question: "Examples of Positioning Reference Systems (PRS) that can use multiple targets are:",
                options: ["Laser and GNSS", "Laser and DARPS", "Laser and FMCW Radar", "Laser and Taut Wire"],
                correct: 2
            },
            {
                question: "A local Positioning Reference System is measuring from a local Reference Origin. Examples are:",
                options: ["Artemis, Taut Wire, FMCW Radar and Laser", "Artemis, DGNSS and Laser", "DGNSS, Taut Wire and FMCW Radar", "DGNSS, Artemis and FMCW Radar"],
                correct: 0
            },
            {
                question: "Why is it necessary for a vessel to be in Auto Position mode for a minimum of 30 minutes before starting work?",
                options: ["To allow the DPO to complete the pre-DP checklist", "In order that additional position-reference systems may be enabled", "To allow the system's mathematical model to build", "To ensure that all thrusters are responding correctly"],
                correct: 2
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let quizCompleted = false;

        function initQuiz() {
            updateProgressBar();
            displayQuestion();
            updateNavigation();
        }

        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            
            document.getElementById('questionNumber').textContent = `Spørsmål ${currentQuestionIndex + 1} av ${questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = questions.length;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                
                const isSelected = userAnswers[currentQuestionIndex] === index;
                if (isSelected) {
                    optionDiv.classList.add('selected');
                }
                
                optionDiv.innerHTML = `
                    <label>
                        <input type="radio" name="question${currentQuestionIndex}" value="${index}" ${isSelected ? 'checked' : ''}>
                        <span>${String.fromCharCode(65 + index)}) ${option}</span>
                    </label>
                `;
                
                optionDiv.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionDiv);
            });
        }

        function selectOption(index) {
            userAnswers[currentQuestionIndex] = index;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.toggle('selected', i === index);
                const radio = option.querySelector('input[type="radio"]');
                radio.checked = i === index;
            });
            
            updateNavigation();
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                updateProgressBar();
                updateNavigation();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                updateProgressBar();
                updateNavigation();
            }
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentQuestionIndex === 0 ? 'none' : 'inline-block';
            
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'Fullfør quiz';
                nextBtn.disabled = userAnswers[currentQuestionIndex] === null;
            } else {
                nextBtn.textContent = 'Neste';
                nextBtn.disabled = userAnswers[currentQuestionIndex] === null;
            }
        }

        function finishQuiz() {
            quizCompleted = true;
            
            let correctAnswers = 0;
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].correct) {
                    correctAnswers++;
                }
            }
            
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            const passed = percentage >= 70;
            
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultsContainer').style.display = 'block';
            
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `${correctAnswers}/${questions.length} (${percentage}%)`;
            scoreDisplay.className = passed ? 'score' : 'score fail';
            
            const resultMessage = document.getElementById('resultMessage');
            if (passed) {
                resultMessage.innerHTML = '<strong style="color: #27ae60;">Fantastisk! Du behersker avanserte DP-konsepter.</strong><br>Minstekrav: 70% for bestått';
            } else {
                resultMessage.innerHTML = '<strong style="color: #e74c3c;">Trenger mer øving på avanserte tema.</strong><br>Minstekrav: 70% for bestått<br>Prøv igjen!';
            }
            
            displayAnswerReview(correctAnswers, percentage);
        }

        function displayAnswerReview(correctAnswers, percentage) {
            const reviewContainer = document.getElementById('answersReview');
            let reviewHTML = '<h3 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Detaljerte Svar</h3>';
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const correctAnswer = question.correct;
                const isCorrect = userAnswer === correctAnswer;
                
                reviewHTML += `
                    <div class="answer-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <div class="answer-question">Spørsmål ${index + 1}: ${question.question}</div>
                        <div class="answer-details">
                            <div class="your-answer">
                                <strong>Ditt svar:</strong> 
                                <span class="${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                                    ${userAnswer !== null ? String.fromCharCode(65 + userAnswer) + ') ' + question.options[userAnswer] : 'Ikke besvart'}
                                </span>
                            </div>
                            ${!isCorrect ? `
                                <div class="correct-answer">
                                    <strong>Riktig svar:</strong> ${String.fromCharCode(65 + correctAnswer)}) ${question.options[correctAnswer]}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            reviewContainer.innerHTML = reviewHTML;
        }

        function startOver() {
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            quizCompleted = false;
            
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultsContainer').style.display = 'none';
            
            initQuiz();
        }

        document.addEventListener('DOMContentLoaded', function() {
            initQuiz();
        });
    </script>
</body>
</html>
